# MCP 블로그 포스팅 Tool 실제 테스트 결과

이 문서는 MCP Inspector 및 LLM 클라이언트에서 blog-post, blog-batch-post Tool을 실제 호출한 결과(성공/실패, 입력/출력, 에러, 개선점 등)를 기록/공유하기 위한 문서입니다.

---

## 1. 테스트 환경
- MCP 서버 버전: v1.0.0
- MCP Inspector 버전: v1.2.0
- 테스트 일시: 2024-06-13
- 테스트 계정: beanspapa@gmail.com (단일 계정)
- 환경변수: .env, client_secret_*.json, BLOG_URL 정상 설정

---

## 2. 테스트 시나리오 및 결과

### [성공 케이스] 정상 포스팅
- **입력**
```json
{
  "title": "테스트 포스트",
  "content": "<h1>본문</h1>",
  "labels": ["테스트", "자동화"],
  "isDraft": false
}
```
- **출력**
```json
{
  "id": "1122334455",
  "status": "LIVE",
  "url": "https://yourblog.blogspot.com/2024/06/test.html",
  ...
}
```
- **비고**: 블로그 ID는 서버가 BLOG_URL로 자동 조회/캐시하며, 사용자는 입력할 필요 없음

---

### [실패 케이스] 인증 토큰 없음
- **입력**: (동일)
- **출력**
```json
{
  "error": "No valid Google OAuth token found"
}
```
- **비고**: 인증 플로우 안내 메시지 노출, 토큰 발급 후 재시도 시 정상 동작

---

### [실패 케이스] BLOG_URL 환경변수 없음
- **상황**: 서버 기동 시 BLOG_URL 미설정
- **출력/로그**
```
Error: BLOG_URL 환경변수가 설정되지 않았습니다.
```
- **비고**: 서버가 시작되지 않음, 환경변수 설정 필요

---

### [실패 케이스] 블로그 ID 조회/캐시 실패
- **상황**: BLOG_URL이 잘못되었거나 네트워크/인증 오류
- **출력/로그**
```
Error: 블로그 주소로 블로그 ID를 조회할 수 없습니다: ...
```
- **비고**: 서버가 시작되지 않음, BLOG_URL/네트워크/인증 상태 확인 필요

---

### [실패 케이스] 블로그 ID 캐시 후 API 호출 시 ID 오류
- **상황**: 캐시된 블로그 ID가 만료/삭제/권한 없음 등으로 API 호출 실패
- **동작**: 서버가 BLOG_URL로 블로그 ID를 1회 재조회 후 재시도, 그래도 실패 시 에러 반환
- **출력/로그**
```
Error: 블로그 ID로 API 호출 실패, 재조회 후에도 실패
```
- **비고**: 블로그 권한/상태, 네트워크, 인증 등 점검 필요

### [2025-06-12] blogId 캐시 파일 경로 관련 테스트
- 상황: 서버를 빌드(npm run build) 후 dist 폴더에서 실행
- 기대 결과: .blog_id_cache.json 파일이 프로젝트 루트에만 생성되어야 함
- 실제 결과:
  - 수정 전: dist/.blog_id_cache.json 파일이 생성됨(잘못된 동작)
  - 수정 후: 루트(.blog_id_cache.json)에만 생성, dist 폴더에는 생성되지 않음(정상)
- 비고:
  - 경로 문제로 인한 캐시 파일 중복/혼동 방지
  - .gitignore에 캐시 파일 포함 재확인

---

## 3. 문제/개선점/특이사항
- 인증 토큰 만료 시 에러 메시지 개선 필요
- Google API 제한(쿼터 초과 등) 발생 시 안내 메시지 추가 필요
- BLOG_URL, client_secret 등 환경변수/시크릿 관리 주의
- 블로그 ID 캐시 파일(.blog_id_cache.json)은 반드시 .gitignore에 추가
- MCP Inspector에서 입력값 자동완성/유효성 검사 기능 활용 권장

---

## 4. 추가 테스트/재현 방법
- MCP Inspector에서 blog-post Tool 선택 → 입력값 작성 → 실행 → 결과 확인
- 토큰 삭제 후 재인증 시나리오, 잘못된 BLOG_URL 입력 등 다양한 케이스 반복 테스트
- 서버 기동 시 환경변수 미설정, 네트워크 차단 등 장애 상황 테스트

---

이 문서는 실제 운영/테스트 중 발생한 모든 케이스를 지속적으로 업데이트/공유하는 용도로 사용합니다. 